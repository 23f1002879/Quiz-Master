{% extends "base.html" %} {% block title %}Dashboard {% endblock %} {% block
link %}
<style>
  h4 {
    text-align: center;
  }
</style>

{% endblock %} {% block content %}
<h1>Dashboard</h1>
<div
  class="container mt-2"
  style="
    background-color: rgb(218, 216, 216);
    border-radius: 5px;
    border-color: black;
  "
>
  <div class="row">
    <div class="col">
      <p style="height: 25px; padding-top: 5px">Dashboard</p>
    </div>
  </div>
</div>
<div class="container mt-4">
  <div class="row">
    <div class="col-md-4">
      <div class="card bg-danger text-white mb-3">
        <div class="card-body">
          <h4 class="card-title">Subjects</h4>
          <p class="card-text" style="text-align: center">
            {{ subject|length }}
          </p>
          <hr />
          <a href="/admin/subject" class="btn btn-primary">See Subjects</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-warning text-white mb-3">
        <div class="card-body">
          <h4 class="card-title">Quiz</h4>
          <p class="card-text" style="text-align: center">{{ quiz|length }}</p>
          <hr />
          <a href="/admin/quiz" class="btn btn-primary">See Quiz</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-success text-white mb-3">
        <div class="card-body">
          <h4 class="card-title">Number of Users</h4>
          <p class="card-text" style="text-align: center">
            {{ user|length - 1 }}
          </p>
          <hr />
          <a href="#users-section" class="btn btn-primary">See Users</a>
        </div>
      </div>
    </div>
  </div>
</div>
<hr />
<!-- Carousel -->
{% if user|length == 1 %}
<div class="alert alert-warning" role="alert">
  No data available</div>
  {% else %}
  <div 
  class="container mt-2 mb-3"
  style="
    background-color: rgb(218, 216, 216);
    border-radius: 5px;
    border-color: black;
  "
>
  <div class="row">
    <div class="col">
      <p style="height: 25px; padding-top: 5px">Summary Charts</p>
    </div>
  </div>
</div>
<div id="demo" class="carousel slide" data-bs-ride="carousel">
  <!-- Indicators/dots -->
  <div class="carousel-indicators">
    <button
      type="button"
      data-bs-target="#demo"
      data-bs-slide-to="0"
      class="active"
    ></button>
    <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
    <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
  </div>

  <!-- The slideshow/carousel -->
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="/static/image/top_scorers.png" alt="Top Scorer Chart" class="d-block w-100" />
    </div>
    <div class="carousel-item">
      <img src="/static/image/user_attempts.png" alt="User Attempts Chart" class="d-block w-100" />
    </div>
  </div>

  <!-- Left and right controls/icons -->
  <button
    class="carousel-control-prev"
    type="button"
    data-bs-target="#demo"
    data-bs-slide="prev"
  >
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button
    class="carousel-control-next"
    type="button"
    data-bs-target="#demo"
    data-bs-slide="next"
  >
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<hr>
<div id="users-section">
<div
  class="container mt-2"
  style="
    background-color: rgb(218, 216, 216);
    border-radius: 5px;
    border-color: black;
  "
>
  <div class="row">
    <div class="col">
      <p style="height: 25px; padding-top: 5px">Users</p>
    </div>
  </div>
</div>

<div class="row mt-2">
  <div class="col">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">User Details</h4>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Full Name</th>
              <th>Status</th>
              <th>Username</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for user in user %} {% if user.username != 'admin@iitmbs' %}
            <tr>
              <td>{{ user.fullname }}</td>
              <td>{{ user.user_status }}</td>
              <td>{{ user.username }}</td>
              <td>
                {% if user.user_status == 'Enabled' %}
                <form
                  action="{{ url_for('disable_user', user_id=user.id) }}"
                  method="post"
                  style="display: inline"
                >
                  <button type="submit" class="btn btn-outline-danger">
                    Disable
                  </button>
                </form>
                {% elif user.user_status == 'Disabled' %}
                <form
                  action="{{ url_for('enable_user', user_id=user.id) }}"
                  method="post"
                  style="display: inline"
                >
                  <button type="submit" class="btn btn-outline-success">
                    Enable
                  </button>
                </form>
                {% endif %}
              </td>
            </tr>
            {% endif %} {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
</div>
{% endif %}
{% endblock %}
